name: Unit Tests
on:
  push:
  pull_request:
  schedule:
    - cron: '0 8 * * 6'
jobs:
  linux-development-server:
    strategy:
      matrix:
        config:
          - bash
          - bash-it
          - git
          - homebrew
          - oh-my-zsh
          - tmux
          - vim
          - vscode
          - zsh
    runs-on: ubuntu-latest
    steps:
      - name: Install dependencies
        run: |
          sudo apt-get install curl git bash zsh vim python3 tmux bc
      - name: List installed software versions
        run: |
          git --version # git
          vim --version # vim/vundle
          zsh --version # zsh/oh-my-zsh
          bash --version # bash/bash-it
          tmux -V # tmux
          bc --version # used in tmux version checking
          curl --version # used for downloading
      - name: Checkout
        uses: actions/checkout@v3
      - name: Setup test directory
        run: |
          mkdir -p ~/dotfiles-install-dir
      - name: Install dotfiles
        run: |
          HOME=~/dotfiles-install-dir ./install-standalone ${{ matrix.config }}
  macos-development:
    strategy:
      matrix:
        config:
          - bash
          - bash-it
          - git
          - homebrew
          - oh-my-zsh
          - vim
          - vscode
          - zsh
    runs-on: macos-latest
    steps:
      - name: List installed software versions
        run: |
          git --version # git
          vim --version # vim/vundle
          zsh --version # zsh/oh-my-zsh
          bash --version # bash/bash-it
          bc --version # used in tmux version checking
          curl --version # used for downloading
      - name: Checkout
        uses: actions/checkout@v3
      - name: Setup test directory
        run: |
          mkdir -p ~/dotfiles-install-dir
      - name: Install dotfiles
        run: |
          HOME=~/dotfiles-install-dir ./install-standalone ${{ matrix.config }}
